<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bot Cards Display</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .card { border: 1px solid #ccc; padding: 10px; margin: 10px; display: inline-block; width: 180px; vertical-align: top; }
    .card img { width: 100%; height: auto; }
    .card h4 { margin: 5px 0; }
    .card p { margin: 2px 0; font-size: 0.9em; }
  </style>
</head>
<body>
  <h2>Bot Cards</h2>
  <div id="cardsContainer">Loading cards...</div>

<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

const supabaseUrl = 'https://yyxbitryliuwyipyclax.supabase.co'
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl5eGJpdHJ5bGl1d3lpcHljbGF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA0NjIyODYsImV4cCI6MjA3NjAzODI4Nn0.6s71yZBUwIXwuFtqcd0aut0z9CRiKw2U1G2g3m7pylU'
const supabase = createClient(supabaseUrl, supabaseKey)

const container = document.getElementById('cardsContainer')

async function fetchCards() {
  container.textContent = 'Loading cards...'

  const { data, error } = await supabase
    .from('bot_cards')
    .select('*')
    .order('box', { ascending: true })
    .limit(50) // limit แค่ 50 ตัวอย่าง

  if (error) {
    container.textContent = 'Error fetching cards: ' + error.message
    return
  }

  if (!data || data.length === 0) {
    container.textContent = 'No cards found.'
    return
  }

  container.innerHTML = '' // เคลียร์

  data.forEach(card => {
    const div = document.createElement('div')
    div.className = 'card'

    const img = document.createElement('img')
    img.src = card.image_url || ''
    img.alt = card.name || 'No name'

    const title = document.createElement('h4')
    title.textContent = card.name || 'Unnamed'

const info = document.createElement('p')

// ถ้า Type = "Life" ให้แสดง Favor Text
let favorText = ''
if (card.type && card.type.toLowerCase() === 'life') {
  favorText = `Favor Text: ${card.favor || '-'} <br>`
}

info.innerHTML = `
  Print: ${card.box}-${card.print} <br>
  Type: ${card.type || '-'} <br>
  Cost: ${card.cost || '-'} <br>
  Gem: ${card.gem || '-'} <br>
  Power: ${card.power || '-'} <br>
  Symbol: ${card.symbol || '-'} <br>
  Color: ${card.color || '-'} <br>
  Ex: ${card.ex || '-'} <br>
  ซอย: ${card.soi || '-'} <br>
  Rare: ${card.rare || '-'} <br>
  Drop Rate: ${card.drop_rate ? card.drop_rate + '/box' : '-'} <br>
  Cards Perdeck: ${card.per_deck || '4'} <br>
  Main Effect: ${card.effect || '-'} <br><br>
  ${favorText}
`


    div.appendChild(img)
    div.appendChild(title)
    div.appendChild(info)

    container.appendChild(div)
  })
}

// เรียกฟังก์ชันตอนโหลด
fetchCards()
</script>

</body>
</html>
